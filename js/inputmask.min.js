(function(factory){if(typeof define==="function"&&define.amd){define(["inputmask.dependencyLib"],factory)}else if(typeof exports==="object"){module.exports=factory(require("./inputmask.dependencyLib.jquery"))}else{factory(window.dependencyLib||jQuery)}}(function($){function Inputmask(alias,options){if(!(this instanceof Inputmask)){return new Inputmask(alias,options)}
if(typeof alias==="object"){options=alias}else{options=options||{};options.alias=alias}
this.el=undefined;this.opts=$.extend(!0,{},this.defaults,options);this.noMasksCache=options&&options.definitions!==undefined;this.userOptions=options||{};resolveAlias(this.opts.alias,options,this.opts)}
Inputmask.prototype={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:$.noop,onincomplete:$.noop,oncleared:$.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyDown:$.noop,onBeforeMask:null,onBeforePaste:function(pastedValue,opts){return $.isFunction(opts.onBeforeMask)?opts.onBeforeMask(pastedValue,opts):pastedValue},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:$.noop,skipOptionalPartCharacter:" ",showTooltip:!1,tooltip:undefined,numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",groupSeparator:"",radixFocus:!1,nojumps:!1,nojumpsThreshold:0,keepStatic:null,positionCaretOnTab:!1,tabThrough:!1,supportsInputType:[],definitions:{"9":{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},"a":{validator:"[A-Za-z\u0410-\u044F\u0401\u0451\u00C0-\u00FF\u00B5]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-z\u0410-\u044F\u0401\u0451\u00C0-\u00FF\u00B5]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:null,canClearPosition:$.noop,postValidation:null,staticDefinitionSymbol:undefined},masksCache:{},mask:function(elems){var that=this;if(typeof elems==="string"){elems=document.getElementById(elems)||document.querySelectorAll(elems)}
elems=elems.nodeName?[elems]:elems;$.each(elems,function(ndx,el){var scopedOpts=$.extend(!0,{},that.opts);importAttributeOptions(el,scopedOpts,$.extend(!0,{},that.userOptions));var maskset=generateMaskSet(scopedOpts,that.noMasksCache);if(maskset!==undefined){if(el.inputmask!==undefined){el.inputmask.remove()}
el.inputmask=new Inputmask();el.inputmask.opts=scopedOpts;el.inputmask.noMasksCache=that.noMasksCache;el.inputmask.userOptions=$.extend(!0,{},that.userOptions);el.inputmask.el=el;el.inputmask.maskset=maskset;el.inputmask.isRTL=!1;$.data(el,"_inputmask_opts",scopedOpts);maskScope({"action":"mask","el":el})}});return elems?(elems[0].inputmask||this):this},option:function(options){if(typeof options==="string"){return this.opts[options]}else if(typeof options==="object"){$.extend(this.opts,options);$.extend(this.userOptions,options);if(this.el){if(options.mask!==undefined||options.alias!==undefined){this.mask(this.el)}else{$.data(this.el,"_inputmask_opts",this.opts);maskScope({"action":"mask","el":this.el})}}
return this}},unmaskedvalue:function(value){return maskScope({"action":"unmaskedvalue","el":this.el,"value":value},this.el&&this.el.inputmask?this.el.inputmask.maskset:generateMaskSet(this.opts,this.noMasksCache),this.opts)},remove:function(){if(this.el){maskScope({"action":"remove","el":this.el});this.el.inputmask=undefined;return this.el}},getemptymask:function(){return maskScope({"action":"getemptymask"},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts)},hasMaskedValue:function(){return!this.opts.autoUnmask},isComplete:function(){return maskScope({"action":"isComplete","el":this.el},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts)},getmetadata:function(){return maskScope({"action":"getmetadata"},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts)},isValid:function(value){return maskScope({"action":"isValid","value":value},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts)},format:function(value,metadata){return maskScope({"action":"format","value":value,"metadata":metadata},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts)}};Inputmask.extendDefaults=function(options){$.extend(!0,Inputmask.prototype.defaults,options)};Inputmask.extendDefinitions=function(definition){$.extend(!0,Inputmask.prototype.defaults.definitions,definition)};Inputmask.extendAliases=function(alias){$.extend(!0,Inputmask.prototype.defaults.aliases,alias)};Inputmask.format=function(value,options,metadata){return Inputmask(options).format(value,metadata)};Inputmask.unmask=function(value,options){return Inputmask(options).unmaskedvalue(value)};Inputmask.isValid=function(value,options){return Inputmask(options).isValid(value)};Inputmask.remove=function(elems){$.each(elems,function(ndx,el){if(el.inputmask)el.inputmask.remove()})};Inputmask.escapeRegex=function(str){var specials=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];return str.replace(new RegExp("(\\"+specials.join("|\\")+")","gim"),"\\$1")};Inputmask.keyCode={ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91};function isInputEventSupported(eventName){var el=document.createElement("input"),evName="on"+eventName,isSupported=(evName in el);if(!isSupported){el.setAttribute(evName,"return;");isSupported=typeof el[evName]=="function"}
el=null;return isSupported}
function isInputTypeSupported(inputType){var isSupported=inputType==="text"||inputType==="tel"||inputType==="password";if(!isSupported){var el=document.createElement("input");el.setAttribute("type",inputType);isSupported=el.type==="text";el=null}
return isSupported}
function resolveAlias(aliasStr,options,opts){var aliasDefinition=opts.aliases[aliasStr];if(aliasDefinition){if(aliasDefinition.alias)resolveAlias(aliasDefinition.alias,undefined,opts);$.extend(!0,opts,aliasDefinition);$.extend(!0,opts,options);return!0}else if(opts.mask===null){opts.mask=aliasStr}
return!1}
function importAttributeOptions(npt,opts,userOptions){var attrOptions=npt.getAttribute("data-inputmask"),option,dataoptions,optionData,p;function importOption(option,optionData){optionData=optionData!==undefined?optionData:npt.getAttribute("data-inputmask-"+option);if(optionData!==null){if(typeof optionData==="string"){if(option.indexOf("on")===0)optionData=window[optionData];else if(optionData==="false")optionData=!1;else if(optionData==="true")optionData=!0}
userOptions[option]=optionData}}
if(attrOptions&&attrOptions!==""){attrOptions=attrOptions.replace(new RegExp("'","g"),'"');dataoptions=JSON.parse("{"+attrOptions+"}")}
if(dataoptions){optionData=undefined;for(p in dataoptions){if(p.toLowerCase()==="alias"){optionData=dataoptions[p];break}}}
importOption("alias",optionData);if(userOptions.alias){resolveAlias(userOptions.alias,userOptions,opts)}
for(option in opts){if(dataoptions){optionData=undefined;for(p in dataoptions){if(p.toLowerCase()===option.toLowerCase()){optionData=dataoptions[p];break}}}
importOption(option,optionData)}
$.extend(!0,opts,userOptions);return opts}
function generateMaskSet(opts,nocache){var ms;function analyseMask(mask){var tokenizer=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})|[^.?*+^${[]()|\\]+|./g,escaped=!1,currentToken=new MaskToken(),match,m,openenings=[],maskTokens=[],openingToken,currentOpeningToken,alternator,lastMatch,groupToken;function MaskToken(isGroup,isOptional,isQuantifier,isAlternator){this.matches=[];this.isGroup=isGroup||!1;this.isOptional=isOptional||!1;this.isQuantifier=isQuantifier||!1;this.isAlternator=isAlternator||!1;this.quantifier={min:1,max:1}}
function insertTestDefinition(mtoken,element,position){var maskdef=opts.definitions[element];position=position!==undefined?position:mtoken.matches.length;var prevMatch=mtoken.matches[position-1];if(maskdef&&!escaped){maskdef.placeholder=$.isFunction(maskdef.placeholder)?maskdef.placeholder(opts):maskdef.placeholder;var prevalidators=maskdef.prevalidator,prevalidatorsL=prevalidators?prevalidators.length:0;for(var i=1;i<maskdef.cardinality;i++){var prevalidator=prevalidatorsL>=i?prevalidators[i-1]:[],validator=prevalidator.validator,cardinality=prevalidator.cardinality;mtoken.matches.splice(position++,0,{fn:validator?typeof validator==="string"?new RegExp(validator):new function(){this.test=validator}:new RegExp("."),cardinality:cardinality?cardinality:1,optionality:mtoken.isOptional,newBlockMarker:prevMatch===undefined||prevMatch.def!==(maskdef.definitionSymbol||element),casing:maskdef.casing,def:maskdef.definitionSymbol||element,placeholder:maskdef.placeholder,mask:element});prevMatch=mtoken.matches[position-1]}
mtoken.matches.splice(position++,0,{fn:maskdef.validator?typeof maskdef.validator=="string"?new RegExp(maskdef.validator):new function(){this.test=maskdef.validator}:new RegExp("."),cardinality:maskdef.cardinality,optionality:mtoken.isOptional,newBlockMarker:prevMatch===undefined||prevMatch.def!==(maskdef.definitionSymbol||element),casing:maskdef.casing,def:maskdef.definitionSymbol||element,placeholder:maskdef.placeholder,mask:element})}else{mtoken.matches.splice(position++,0,{fn:null,cardinality:0,optionality:mtoken.isOptional,newBlockMarker:prevMatch===undefined||prevMatch.def!==element,casing:null,def:opts.staticDefinitionSymbol||element,placeholder:opts.staticDefinitionSymbol!==undefined?element:undefined,mask:element});escaped=!1}}
function verifyGroupMarker(lastMatch,isOpenGroup){if(lastMatch.isGroup){lastMatch.isGroup=!1;insertTestDefinition(lastMatch,opts.groupmarker.start,0);if(isOpenGroup!==!0){insertTestDefinition(lastMatch,opts.groupmarker.end)}}}
function maskCurrentToken(m,currentToken,lastMatch,extraCondition){if(currentToken.matches.length>0&&(extraCondition===undefined||extraCondition)){lastMatch=currentToken.matches[currentToken.matches.length-1];verifyGroupMarker(lastMatch)}
insertTestDefinition(currentToken,m)}
function defaultCase(){if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];maskCurrentToken(m,currentOpeningToken,lastMatch,!currentOpeningToken.isAlternator);if(currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++){alternator.matches[mndx].isGroup=!1}
if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];currentOpeningToken.matches.push(alternator)}else{currentToken.matches.push(alternator)}}}else{maskCurrentToken(m,currentToken,lastMatch)}}
function reverseTokens(maskToken){function reverseStatic(st){if(st===opts.optionalmarker.start)st=opts.optionalmarker.end;else if(st===opts.optionalmarker.end)st=opts.optionalmarker.start;else if(st===opts.groupmarker.start)st=opts.groupmarker.end;else if(st===opts.groupmarker.end)st=opts.groupmarker.start;return st}
maskToken.matches=maskToken.matches.reverse();for(var match in maskToken.matches){var intMatch=parseInt(match);if(maskToken.matches[match].isQuantifier&&maskToken.matches[intMatch+1]&&maskToken.matches[intMatch+1].isGroup){var qt=maskToken.matches[match];maskToken.matches.splice(match,1);maskToken.matches.splice(intMatch+1,0,qt)}
if(maskToken.matches[match].matches!==undefined){maskToken.matches[match]=reverseTokens(maskToken.matches[match])}else{maskToken.matches[match]=reverseStatic(maskToken.matches[match])}}
return maskToken}
while(match=tokenizer.exec(mask)){m=match[0];if(escaped){defaultCase();continue}
switch(m.charAt(0)){case opts.escapeChar:escaped=!0;break;case opts.optionalmarker.end:case opts.groupmarker.end:openingToken=openenings.pop();if(openingToken!==undefined){if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];currentOpeningToken.matches.push(openingToken);if(currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++){alternator.matches[mndx].isGroup=!1}
if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];currentOpeningToken.matches.push(alternator)}else{currentToken.matches.push(alternator)}}}else{currentToken.matches.push(openingToken)}}else defaultCase();break;case opts.optionalmarker.start:openenings.push(new MaskToken(!1,!0));break;case opts.groupmarker.start:openenings.push(new MaskToken(!0));break;case opts.quantifiermarker.start:var quantifier=new MaskToken(!1,!1,!0);m=m.replace(/[{}]/g,"");var mq=m.split(","),mq0=isNaN(mq[0])?mq[0]:parseInt(mq[0]),mq1=mq.length===1?mq0:(isNaN(mq[1])?mq[1]:parseInt(mq[1]));if(mq1==="*"||mq1==="+"){mq0=mq1==="*"?0:1}
quantifier.quantifier={min:mq0,max:mq1};if(openenings.length>0){var matches=openenings[openenings.length-1].matches;match=matches.pop();if(!match.isGroup){groupToken=new MaskToken(!0);groupToken.matches.push(match);match=groupToken}
matches.push(match);matches.push(quantifier)}else{match=currentToken.matches.pop();if(!match.isGroup){groupToken=new MaskToken(!0);groupToken.matches.push(match);match=groupToken}
currentToken.matches.push(match);currentToken.matches.push(quantifier)}
break;case opts.alternatormarker:if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];lastMatch=currentOpeningToken.matches.pop()}else{lastMatch=currentToken.matches.pop()}
if(lastMatch.isAlternator){openenings.push(lastMatch)}else{alternator=new MaskToken(!1,!1,!1,!0);alternator.matches.push(lastMatch);openenings.push(alternator)}
break;default:defaultCase()}}
while(openenings.length>0){openingToken=openenings.pop();verifyGroupMarker(openingToken,!0);currentToken.matches.push(openingToken)}
if(currentToken.matches.length>0){lastMatch=currentToken.matches[currentToken.matches.length-1];verifyGroupMarker(lastMatch);maskTokens.push(currentToken)}
if(opts.numericInput){reverseTokens(maskTokens[0])}
return maskTokens}
function generateMask(mask,metadata){if(mask===null||mask===""){return undefined}else{if(mask.length===1&&opts.greedy===!1&&opts.repeat!==0){opts.placeholder=""}
if(opts.repeat>0||opts.repeat==="*"||opts.repeat==="+"){var repeatStart=opts.repeat==="*"?0:(opts.repeat==="+"?1:opts.repeat);mask=opts.groupmarker.start+mask+opts.groupmarker.end+opts.quantifiermarker.start+repeatStart+","+opts.repeat+opts.quantifiermarker.end}
var masksetDefinition;if(Inputmask.prototype.masksCache[mask]===undefined||nocache===!0){masksetDefinition={"mask":mask,"maskToken":analyseMask(mask),"validPositions":{},"_buffer":undefined,"buffer":undefined,"tests":{},"metadata":metadata};if(nocache!==!0){Inputmask.prototype.masksCache[opts.numericInput?mask.split("").reverse().join(""):mask]=masksetDefinition;masksetDefinition=$.extend(!0,{},Inputmask.prototype.masksCache[opts.numericInput?mask.split("").reverse().join(""):mask])}}else masksetDefinition=$.extend(!0,{},Inputmask.prototype.masksCache[opts.numericInput?mask.split("").reverse().join(""):mask]);return masksetDefinition}}
function preProcessMask(mask){mask=mask.toString();return mask}
if($.isFunction(opts.mask)){opts.mask=opts.mask(opts)}
if($.isArray(opts.mask)){if(opts.mask.length>1){opts.keepStatic=opts.keepStatic===null?!0:opts.keepStatic;var altMask="(";$.each(opts.numericInput?opts.mask.reverse():opts.mask,function(ndx,msk){if(altMask.length>1){altMask+=")|("}
if(msk.mask!==undefined&&!$.isFunction(msk.mask)){altMask+=preProcessMask(msk.mask)}else{altMask+=preProcessMask(msk)}});altMask+=")";return generateMask(altMask,opts.mask)}else opts.mask=opts.mask.pop()}
if(opts.mask){if(opts.mask.mask!==undefined&&!$.isFunction(opts.mask.mask)){ms=generateMask(preProcessMask(opts.mask.mask),opts.mask)}else{ms=generateMask(preProcessMask(opts.mask),opts.mask)}}
return ms}
var ua=navigator.userAgent,iphone=ua.match(new RegExp("iphone","i"))!==null,android=ua.match(new RegExp("android.*safari.*","i"))!==null,androidchrome=ua.match(new RegExp("android.*chrome.*","i"))!==null,androidfirefox=ua.match(new RegExp("android.*firefox.*","i"))!==null,kindle=/Kindle/i.test(ua)||/Silk/i.test(ua)||/KFTT/i.test(ua)||/KFOT/i.test(ua)||/KFJWA/i.test(ua)||/KFJWI/i.test(ua)||/KFSOWI/i.test(ua)||/KFTHWA/i.test(ua)||/KFTHWI/i.test(ua)||/KFAPWA/i.test(ua)||/KFAPWI/i.test(ua),PasteEventType=isInputEventSupported("paste")?"paste":isInputEventSupported("input")?"input":"propertychange";function maskScope(actionObj,maskset,opts){var isRTL=!1,undoValue,compositionData,el,$el,skipKeyPressEvent=!1,skipInputEvent=!1,ignorable=!1,maxLength,mouseEnter=!0;function getMaskTemplate(baseOnInput,minimalPos,includeInput){minimalPos=minimalPos||0;var maskTemplate=[],ndxIntlzr,pos=0,test,testPos;do{if(baseOnInput===!0&&getMaskSet().validPositions[pos]){var validPos=getMaskSet().validPositions[pos];test=validPos.match;ndxIntlzr=validPos.locator.slice();maskTemplate.push(includeInput===!0?validPos.input:getPlaceholder(pos,test))}else{testPos=getTestTemplate(pos,ndxIntlzr,pos-1);test=testPos.match;ndxIntlzr=testPos.locator.slice();maskTemplate.push(getPlaceholder(pos,test))}
pos++}while((maxLength===undefined||pos-1<maxLength)&&test.fn!==null||(test.fn===null&&test.def!=="")||minimalPos>=pos);maskTemplate.pop();return maskTemplate}
function getMaskSet(){return maskset}
function resetMaskSet(soft){var maskset=getMaskSet();maskset.buffer=undefined;if(soft!==!0){maskset.tests={};maskset._buffer=undefined;maskset.validPositions={};maskset.p=0}}
function getLastValidPosition(closestTo,strict){var maskset=getMaskSet(),lastValidPosition=-1,valids=maskset.validPositions;if(closestTo===undefined)closestTo=-1;var before=lastValidPosition,after=lastValidPosition;for(var posNdx in valids){var psNdx=parseInt(posNdx);if(valids[psNdx]&&(strict||valids[psNdx].match.fn!==null)){if(psNdx<=closestTo)before=psNdx;if(psNdx>=closestTo)after=psNdx}}
lastValidPosition=(before!==-1&&(closestTo-before)>1)||after<closestTo?before:after;return lastValidPosition}
function setValidPosition(pos,validTest,fromSetValid){if(opts.insertMode&&getMaskSet().validPositions[pos]!==undefined&&fromSetValid===undefined){var positionsClone=$.extend(!0,{},getMaskSet().validPositions),lvp=getLastValidPosition(),i;for(i=pos;i<=lvp;i++){delete getMaskSet().validPositions[i]}
getMaskSet().validPositions[pos]=validTest;var valid=!0,j,vps=getMaskSet().validPositions;for(i=(j=pos);i<=lvp;i++){var t=positionsClone[i];if(t!==undefined){var posMatch=j,prevPosMatch=-1;while(posMatch<getMaskLength()&&((t.match.fn==null&&vps[i]&&(vps[i].match.optionalQuantifier===!0||vps[i].match.optionality===!0))||t.match.fn!=null)){if(t.match.fn===null||(!opts.keepStatic&&vps[i]&&(vps[i+1]!==undefined&&getTests(i+1,vps[i].locator.slice(),i).length>1||vps[i].alternation!==undefined))){posMatch++}else posMatch=seekNext(j);if(positionCanMatchDefinition(posMatch,t.match.def)){valid=isValid(posMatch,t.input,!0,!0)!==!1;j=posMatch;break}else{valid=t.match.fn==null;if(prevPosMatch===posMatch)break;prevPosMatch=posMatch}}}
if(!valid)break}
if(!valid){getMaskSet().validPositions=$.extend(!0,{},positionsClone);resetMaskSet(!0);return!1}}else getMaskSet().validPositions[pos]=validTest;resetMaskSet(!0);return!0}
function stripValidPositions(start,end,nocheck,strict){var i,startPos=start;getMaskSet().p=start;for(i=startPos;i<end;i++){if(getMaskSet().validPositions[i]!==undefined){if(nocheck===!0||opts.canClearPosition(getMaskSet(),i,getLastValidPosition(),strict,opts)!==!1){delete getMaskSet().validPositions[i]}}}
for(i=startPos+1;i<=getLastValidPosition();){while(getMaskSet().validPositions[startPos]!==undefined)startPos++;var s=getMaskSet().validPositions[startPos];if(i<startPos)i=startPos+1;if((getMaskSet().validPositions[i]!==undefined||!isMask(i))&&s===undefined){var t=getTestTemplate(i);if(positionCanMatchDefinition(startPos,t.match.def)){if(isValid(startPos,t.input||getPlaceholder(i),!0)!==!1){delete getMaskSet().validPositions[i];i++}}else if(!isMask(i)){i++;startPos--}
startPos++}else i++}
var lvp=getLastValidPosition(),ml=getMaskLength();if(strict!==!0&&nocheck!==!0&&getMaskSet().validPositions[lvp]!==undefined&&getMaskSet().validPositions[lvp].input===opts.radixPoint){delete getMaskSet().validPositions[lvp]}
for(i=lvp+1;i<=ml;i++){if(getMaskSet().validPositions[i]){delete getMaskSet().validPositions[i]}}
resetMaskSet(!0)}
function getTestTemplate(pos,ndxIntlzr,tstPs){var testPos=getMaskSet().validPositions[pos];if(testPos===undefined){var testPositions=getTests(pos,ndxIntlzr,tstPs),lvp=getLastValidPosition(),lvTest=getMaskSet().validPositions[lvp]||getTests(0)[0],lvTestAltArr=(lvTest.alternation!==undefined)?lvTest.locator[lvTest.alternation].toString().split(","):[];for(var ndx=0;ndx<testPositions.length;ndx++){testPos=testPositions[ndx];if(testPos.match&&(((opts.greedy&&testPos.match.optionalQuantifier!==!0)||(testPos.match.optionality===!1||testPos.match.newBlockMarker===!1)&&testPos.match.optionalQuantifier!==!0)&&((lvTest.alternation===undefined||lvTest.alternation!==testPos.alternation)||(testPos.locator[lvTest.alternation]!==undefined&&checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(","),lvTestAltArr))))){break}}}
return testPos}
function getTest(pos){if(getMaskSet().validPositions[pos]){return getMaskSet().validPositions[pos].match}
return getTests(pos)[0].match}
function positionCanMatchDefinition(pos,def){var valid=!1,tests=getTests(pos);for(var tndx=0;tndx<tests.length;tndx++){if(tests[tndx].match&&tests[tndx].match.def===def){valid=!0;break}}
return valid}
function getTests(pos,ndxIntlzr,tstPs,cacheable){var maskTokens=getMaskSet().maskToken,testPos=ndxIntlzr?tstPs:0,ndxInitializer=ndxIntlzr||[0],matches=[],insertStop=!1,latestMatch,isFirstMatch;function resolveTestFromToken(maskToken,ndxInitializer,loopNdx,quantifierRecurse){function handleMatch(match,loopNdx,quantifierRecurse){function resolveNdxInitializer(pos,alternateNdx){var previousMatch,indexPos;if(getMaskSet().tests[pos]||getMaskSet().validPositions[pos]){$.each(getMaskSet().tests[pos]||[getMaskSet().validPositions[pos]],function(ndx,lmnt){var ndxPos=lmnt.alternation?lmnt.locator[lmnt.alternation].toString().indexOf(alternateNdx):-1;if(indexPos===undefined||(ndxPos<indexPos&&ndxPos!==-1)){previousMatch=lmnt;indexPos=ndxPos}})}
return previousMatch?previousMatch.locator.slice(previousMatch.alternation+1):[]}
if(testPos>10000){throw "Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+getMaskSet().mask}
if(testPos===pos&&match.matches===undefined){matches.push({"match":match,"locator":loopNdx.reverse()});return!0}else if(match.matches!==undefined){if(match.isGroup&&quantifierRecurse!==match){match=handleMatch(maskToken.matches[$.inArray(match,maskToken.matches)+1],loopNdx);if(match)return!0}else if(match.isOptional){var optionalToken=match;match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse);if(match){latestMatch=matches[matches.length-1].match;isFirstMatch=$.inArray(latestMatch,optionalToken.matches)===0;if(isFirstMatch){insertStop=!0;testPos=pos}else return!0}}else if(match.isAlternator){var alternateToken=match,malternateMatches=[],maltMatches,currentMatches=matches.slice(),loopNdxCnt=loopNdx.length;var altIndex=ndxInitializer.length>0?ndxInitializer.shift():-1;if(altIndex===-1||typeof altIndex==="string"){var currentPos=testPos,ndxInitializerClone=ndxInitializer.slice(),altIndexArr=[],amndx;if(typeof altIndex=="string"){altIndexArr=altIndex.split(",")}else{for(amndx=0;amndx<alternateToken.matches.length;amndx++){altIndexArr.push(amndx)}}
for(var ndx=0;ndx<altIndexArr.length;ndx++){amndx=parseInt(altIndexArr[ndx]);matches=[];ndxInitializer=resolveNdxInitializer(testPos,amndx);match=handleMatch(alternateToken.matches[amndx]||maskToken.matches[amndx],[amndx].concat(loopNdx),quantifierRecurse)||match;if(match!==!0&&match!==undefined&&(altIndexArr[altIndexArr.length-1]<alternateToken.matches.length)){var ntndx=maskToken.matches.indexOf(match)+1;if(maskToken.matches.length>ntndx){match=handleMatch(maskToken.matches[ntndx],[ntndx].concat(loopNdx.slice(1,loopNdx.length)),quantifierRecurse);if(match){altIndexArr.push(ntndx.toString());$.each(matches,function(ndx,lmnt){lmnt.alternation=loopNdx.length-1})}}}
maltMatches=matches.slice();testPos=currentPos;matches=[];for(var i=0;i<ndxInitializerClone.length;i++){ndxInitializer[i]=ndxInitializerClone[i]}
for(var ndx1=0;ndx1<maltMatches.length;ndx1++){var altMatch=maltMatches[ndx1];altMatch.alternation=altMatch.alternation||loopNdxCnt;for(var ndx2=0;ndx2<malternateMatches.length;ndx2++){var altMatch2=malternateMatches[ndx2];if(altMatch.match.def===altMatch2.match.def&&(typeof altIndex!=="string"||$.inArray(altMatch.locator[altMatch.alternation].toString(),altIndexArr)!==-1)){if(altMatch.match.mask===altMatch2.match.mask){maltMatches.splice(ndx1,1);ndx1--}
if(altMatch2.locator[altMatch.alternation].toString().indexOf(altMatch.locator[altMatch.alternation])===-1){altMatch2.locator[altMatch.alternation]=altMatch2.locator[altMatch.alternation]+","+altMatch.locator[altMatch.alternation];altMatch2.alternation=altMatch.alternation}
break}}}
malternateMatches=malternateMatches.concat(maltMatches)}
if(typeof altIndex=="string"){malternateMatches=$.map(malternateMatches,function(lmnt,ndx){if(isFinite(ndx)){var mamatch,alternation=lmnt.alternation,altLocArr=lmnt.locator[alternation].toString().split(",");lmnt.locator[alternation]=undefined;lmnt.alternation=undefined;for(var alndx=0;alndx<altLocArr.length;alndx++){mamatch=$.inArray(altLocArr[alndx],altIndexArr)!==-1;if(mamatch){if(lmnt.locator[alternation]!==undefined){lmnt.locator[alternation]+=",";lmnt.locator[alternation]+=altLocArr[alndx]}else lmnt.locator[alternation]=parseInt(altLocArr[alndx]);lmnt.alternation=alternation}}
if(lmnt.locator[alternation]!==undefined)return lmnt}})}
matches=currentMatches.concat(malternateMatches);testPos=pos;insertStop=matches.length>0}else{match=handleMatch(alternateToken.matches[altIndex]||maskToken.matches[altIndex],[altIndex].concat(loopNdx),quantifierRecurse)}
if(match)return!0}else if(match.isQuantifier&&quantifierRecurse!==maskToken.matches[$.inArray(match,maskToken.matches)-1]){var qt=match;for(var qndx=(ndxInitializer.length>0)?ndxInitializer.shift():0;(qndx<(isNaN(qt.quantifier.max)?qndx+1:qt.quantifier.max))&&testPos<=pos;qndx++){var tokenGroup=maskToken.matches[$.inArray(qt,maskToken.matches)-1];match=handleMatch(tokenGroup,[qndx].concat(loopNdx),tokenGroup);if(match){latestMatch=matches[matches.length-1].match;latestMatch.optionalQuantifier=qndx>(qt.quantifier.min-1);isFirstMatch=$.inArray(latestMatch,tokenGroup.matches)===0;if(isFirstMatch){if(qndx>(qt.quantifier.min-1)){insertStop=!0;testPos=pos;break}else return!0}else{return!0}}}}else{match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse);if(match)return!0}}else testPos++}
for(var tndx=(ndxInitializer.length>0?ndxInitializer.shift():0);tndx<maskToken.matches.length;tndx++){if(maskToken.matches[tndx].isQuantifier!==!0){var match=handleMatch(maskToken.matches[tndx],[tndx].concat(loopNdx),quantifierRecurse);if(match&&testPos===pos){return match}else if(testPos>pos){break}}}}
if(pos>-1){if(cacheable===!0&&getMaskSet().tests[pos]){return getMaskSet().tests[pos]}
if(ndxIntlzr===undefined){var previousPos=pos-1,test;while((test=getMaskSet().validPositions[previousPos])===undefined&&previousPos>-1){if(getMaskSet().tests[previousPos]&&(test=getMaskSet().tests[previousPos][0])!==undefined){break}
previousPos--}
if(test!==undefined&&previousPos>-1){testPos=previousPos;ndxInitializer=test.locator.slice()}}
for(var mtndx=ndxInitializer.shift();mtndx<maskTokens.length;mtndx++){var match=resolveTestFromToken(maskTokens[mtndx],ndxInitializer,[mtndx]);if((match&&testPos===pos)||testPos>pos){break}}
if(matches.length===0||insertStop){matches.push({"match":{fn:null,cardinality:0,optionality:!0,casing:null,def:""},"locator":[]})}
getMaskSet().tests[pos]=$.extend(!0,[],matches);return getMaskSet().tests[pos]}}
function getBufferTemplate(){if(getMaskSet()._buffer===undefined){getMaskSet()._buffer=getMaskTemplate(!1,1)}
return getMaskSet()._buffer}
function getBuffer(noCache){if(getMaskSet().buffer===undefined||noCache===!0){if(noCache===!0){for(var testNdx in getMaskSet().tests){if(getMaskSet().validPositions[testNdx]===undefined){delete getMaskSet().tests[testNdx]}}}
getMaskSet().buffer=getMaskTemplate(!0,getLastValidPosition(),!0)}
return getMaskSet().buffer}
function refreshFromBuffer(start,end,buffer){var i;buffer=buffer;if(start===!0){resetMaskSet();start=0;end=buffer.length}else{for(i=start;i<end;i++){delete getMaskSet().validPositions[i];delete getMaskSet().tests[i]}}
for(i=start;i<end;i++){resetMaskSet(!0);if(buffer[i]!==opts.skipOptionalPartCharacter){isValid(i,buffer[i],!0,!0)}}}
function casing(elem,test){switch(test.casing){case "upper":elem=elem.toUpperCase();break;case "lower":elem=elem.toLowerCase();break}
return elem}
function checkAlternationMatch(altArr1,altArr2){var altArrC=opts.greedy?altArr2:altArr2.slice(0,1),isMatch=!1;for(var alndx=0;alndx<altArr1.length;alndx++){if($.inArray(altArr1[alndx],altArrC)!==-1){isMatch=!0;break}}
return isMatch}
function isValid(pos,c,strict,fromSetValid){strict=strict===!0;function _isValid(position,c,strict,fromSetValid){var rslt=!1;$.each(getTests(position),function(ndx,tst){var test=tst.match;var loopend=c?1:0,chrs="";for(var i=test.cardinality;i>loopend;i--){chrs+=getBufferElement(position-(i-1))}
if(c){chrs+=c}
getBuffer(!0);rslt=test.fn!=null?test.fn.test(chrs,getMaskSet(),position,strict,opts):(c===test.def||c===opts.skipOptionalPartCharacter)&&test.def!==""?{c:test.placeholder||test.def,pos:position}:!1;if(rslt!==!1){var elem=rslt.c!==undefined?rslt.c:c;elem=(elem===opts.skipOptionalPartCharacter&&test.fn===null)?(test.placeholder||test.def):elem;var validatedPos=position,possibleModifiedBuffer=getBuffer();if(rslt.remove!==undefined){if(!$.isArray(rslt.remove))rslt.remove=[rslt.remove];$.each(rslt.remove.sort(function(a,b){return b-a}),function(ndx,lmnt){stripValidPositions(lmnt,lmnt+1,!0)})}
if(rslt.insert!==undefined){if(!$.isArray(rslt.insert))rslt.insert=[rslt.insert];$.each(rslt.insert.sort(function(a,b){return a-b}),function(ndx,lmnt){isValid(lmnt.pos,lmnt.c,!0)})}
if(rslt.refreshFromBuffer){var refresh=rslt.refreshFromBuffer;strict=!0;refreshFromBuffer(refresh===!0?refresh:refresh.start,refresh.end,possibleModifiedBuffer);if(rslt.pos===undefined&&rslt.c===undefined){rslt.pos=getLastValidPosition();return!1}
validatedPos=rslt.pos!==undefined?rslt.pos:position;if(validatedPos!==position){rslt=$.extend(rslt,isValid(validatedPos,elem,!0));return!1}}else if(rslt!==!0&&rslt.pos!==undefined&&rslt.pos!==position){validatedPos=rslt.pos;refreshFromBuffer(position,validatedPos,getBuffer().slice());if(validatedPos!==position){rslt=$.extend(rslt,isValid(validatedPos,elem,!0));return!1}}
if(rslt!==!0&&rslt.pos===undefined&&rslt.c===undefined){return!1}
if(ndx>0){resetMaskSet(!0)}
if(!setValidPosition(validatedPos,$.extend({},tst,{"input":casing(elem,test)}),fromSetValid)){rslt=!1}
return!1}});return rslt}
function alternate(pos,c,strict,fromSetValid){var validPsClone=$.extend(!0,{},getMaskSet().validPositions),lastAlt,alternation,isValidRslt,altPos,i,validPos;for(var lAlt=getLastValidPosition();lAlt>=0;lAlt--){altPos=getMaskSet().validPositions[lAlt];if(altPos&&altPos.alternation!==undefined){lastAlt=lAlt;alternation=getMaskSet().validPositions[lastAlt].alternation;if(getTestTemplate(lastAlt).locator[altPos.alternation]!==altPos.locator[altPos.alternation]){break}}}
if(alternation!==undefined){lastAlt=parseInt(lastAlt);for(var decisionPos in getMaskSet().validPositions){decisionPos=parseInt(decisionPos);altPos=getMaskSet().validPositions[decisionPos];if(decisionPos>=lastAlt&&altPos.alternation!==undefined){var altNdxs=getMaskSet().validPositions[lastAlt].locator[alternation].toString().split(","),decisionTaker=altPos.locator[alternation]!==undefined?altPos.locator[alternation]:altNdxs[0];if(decisionTaker.length>0){decisionTaker=decisionTaker.split(",")[0]}
for(var mndx=0;mndx<altNdxs.length;mndx++){if(decisionTaker<altNdxs[mndx]){var possibilityPos,possibilities;for(var dp=decisionPos;dp>=0;dp--){possibilityPos=getMaskSet().validPositions[dp];if(possibilityPos!==undefined){possibilities=possibilityPos.locator[alternation];possibilityPos.locator[alternation]=parseInt(altNdxs[mndx]);break}}
if(decisionTaker!==possibilityPos.locator[alternation]){var validInputs=[],staticInputsBeforePos=0;for(i=decisionPos+1;i<getLastValidPosition()+1;i++){validPos=getMaskSet().validPositions[i];if(validPos&&validPos.match.fn!=null){validInputs.push(validPos.input)}else if(i<pos)staticInputsBeforePos++;delete getMaskSet().validPositions[i];delete getMaskSet().tests[i]}
resetMaskSet(!0);opts.keepStatic=!opts.keepStatic;isValidRslt=!0;while(validInputs.length>0){var input=validInputs.shift();if(input!==opts.skipOptionalPartCharacter){if(!(isValidRslt=isValid(getLastValidPosition()+1,input,!1,!0))){break}}}
possibilityPos.alternation=alternation;possibilityPos.locator[alternation]=possibilities;if(isValidRslt){var targetLvp=getLastValidPosition(pos)+1;var staticInputsBeforePosAlternate=0;for(i=decisionPos+1;i<getLastValidPosition()+1;i++){validPos=getMaskSet().validPositions[i];if((validPos===undefined||validPos.match.fn==null)&&i<pos){staticInputsBeforePosAlternate++}}
pos=pos+(staticInputsBeforePosAlternate-staticInputsBeforePos);isValidRslt=isValid(pos>targetLvp?targetLvp:pos,c,strict,fromSetValid)}
opts.keepStatic=!opts.keepStatic;if(!isValidRslt){resetMaskSet();getMaskSet().validPositions=$.extend(!0,{},validPsClone)}else return isValidRslt}}}
break}}}
return!1}
function trackbackAlternations(originalPos,newPos){var vp=getMaskSet().validPositions[newPos],targetLocator=vp.locator,tll=targetLocator.length;for(var ps=originalPos;ps<newPos;ps++){if(!isMask(ps,!0)){var tests=getTests(ps),bestMatch=tests[0],equality=-1;$.each(tests,function(ndx,tst){for(var i=0;i<tll;i++){if(tst.locator[i]!==undefined&&checkAlternationMatch(tst.locator[i].toString().split(","),targetLocator[i].toString().split(","))){if(equality<i){equality=i;bestMatch=tst}}else break}});setValidPosition(ps,$.extend({},bestMatch,{"input":bestMatch.match.def}),!0)}}}
var buffer=getBuffer();for(var pndx=pos-1;pndx>-1;pndx--){if(getMaskSet().validPositions[pndx]){break}}
pndx++;for(;pndx<pos;pndx++){if(getMaskSet().validPositions[pndx]===undefined&&(((!isMask(pndx)||buffer[pndx]!==getPlaceholder(pndx))&&getTests(pndx).length>1)||(buffer[pndx]===opts.radixPoint||buffer[pndx]==="0"&&$.inArray(opts.radixPoint,buffer)<pndx)))
{_isValid(pndx,buffer[pndx],!0)}}
var maskPos=pos,result=!1,positionsClone=$.extend(!0,{},getMaskSet().validPositions);if(maskPos<getMaskLength()){result=_isValid(maskPos,c,strict,fromSetValid);if((!strict||fromSetValid)&&result===!1){var currentPosValid=getMaskSet().validPositions[maskPos];if(currentPosValid&&currentPosValid.match.fn===null&&(currentPosValid.match.def===c||c===opts.skipOptionalPartCharacter)){result={"caret":seekNext(maskPos)}}else if((opts.insertMode||getMaskSet().validPositions[seekNext(maskPos)]===undefined)&&!isMask(maskPos,!0)){for(var nPos=maskPos+1,snPos=seekNext(maskPos);nPos<=snPos;nPos++){result=_isValid(nPos,c,strict,fromSetValid);if(result!==!1){trackbackAlternations(maskPos,nPos);maskPos=nPos;break}}}}}
if(result===!1&&opts.keepStatic){result=alternate(pos,c,strict,fromSetValid)}
if(result===!0){result={"pos":maskPos}}
if($.isFunction(opts.postValidation)&&result!==!1&&!strict){var postValidResult=opts.postValidation(getBuffer(!0),opts);if(!postValidResult){resetMaskSet(!0);getMaskSet().validPositions=$.extend(!0,{},positionsClone);result=!1}else if(postValidResult.refreshFromBuffer){var refresh=postValidResult.refreshFromBuffer;refreshFromBuffer(refresh===!0?refresh:refresh.start,refresh.end,postValidResult.buffer);resetMaskSet(!0);result=postValidResult}}
return result}
function isMask(pos,strict){var test=getTest(pos);if(test.fn!=null){return test.fn}else if(strict!==!0&&pos>-1&&!opts.keepStatic&&getMaskSet().validPositions[pos]===undefined){var tests=getTests(pos,undefined,undefined,!0);return tests.length>2}
return!1}
function getMaskLength(){var maskLength;maxLength=el!==undefined?el.maxLength:undefined;if(maxLength===-1)maxLength=undefined;var pos,lvp=getLastValidPosition(),testPos=getMaskSet().validPositions[lvp],ndxIntlzr=testPos!==undefined?testPos.locator.slice():undefined;for(pos=lvp+1;testPos===undefined||(testPos.match.fn!==null||(testPos.match.fn===null&&testPos.match.def!==""));pos++){testPos=getTestTemplate(pos,ndxIntlzr,pos-1);ndxIntlzr=testPos.locator.slice()}
var lastTest=getTest(pos-1);maskLength=(lastTest.def!=="")?pos:pos-1;return(maxLength===undefined||maskLength<maxLength)?maskLength:maxLength}
function seekNext(pos,newBlock){var maskL=getMaskLength();if(pos>=maskL)return maskL;var position=pos;while(++position<maskL&&((newBlock===!0&&(getTest(position).newBlockMarker!==!0||!isMask(position)))||(newBlock!==!0&&!isMask(position)&&(opts.nojumps!==!0||opts.nojumpsThreshold>position)))){}
return position}
function seekPrevious(pos,newBlock){var position=pos;if(position<=0)return 0;while(--position>0&&((newBlock===!0&&getTest(position).newBlockMarker!==!0)||(newBlock!==!0&&!isMask(position)))){}
return position}
function getBufferElement(position){return getMaskSet().validPositions[position]===undefined?getPlaceholder(position):getMaskSet().validPositions[position].input}
function writeBuffer(input,buffer,caretPos,event,triggerInputEvent){if(event&&$.isFunction(opts.onBeforeWrite)){var result=opts.onBeforeWrite(event,buffer,caretPos,opts);if(result){if(result.refreshFromBuffer){var refresh=result.refreshFromBuffer;refreshFromBuffer(refresh===!0?refresh:refresh.start,refresh.end,result.buffer||buffer);buffer=getBuffer(!0)}
if(caretPos!==undefined)caretPos=result.caret!==undefined?result.caret:caretPos}}
input.inputmask._valueSet(buffer.join(""));if(caretPos!==undefined&&(event===undefined||event.type!=="blur")){caret(input,caretPos)}
if(triggerInputEvent===!0){skipInputEvent=!0;$(input).trigger("input")}}
function getPlaceholder(pos,test){test=test||getTest(pos);if(test.placeholder!==undefined){return test.placeholder}else if(test.fn===null){if(pos>-1&&!opts.keepStatic&&getMaskSet().validPositions[pos]===undefined){var tests=getTests(pos),staticAlternations=0,prevTest;if(tests.length>2){for(var i=0;i<tests.length;i++){if(tests[i].match.optionality!==!0&&tests[i].match.optionalQuantifier!==!0&&(tests[i].match.fn===null||(prevTest===undefined||tests[i].match.fn.test(prevTest.match.def,getMaskSet(),pos,!0,opts)!==!1))){staticAlternations++;if(tests[i].match.fn===null)prevTest=tests[i];if(staticAlternations>1)return opts.placeholder.charAt(pos%opts.placeholder.length)}}}}
return test.def}
return opts.placeholder.charAt(pos%opts.placeholder.length)}
function checkVal(input,writeOut,strict,nptvl){var inputValue=nptvl.slice(),charCodes="",initialNdx=0;function isTemplateMatch(){var isMatch=!1;var charCodeNdx=getBufferTemplate().slice(initialNdx,seekNext(initialNdx)).join("").indexOf(charCodes);if(charCodeNdx!==-1&&!isMask(initialNdx)){isMatch=!0;var bufferTemplateArr=getBufferTemplate().slice(initialNdx,initialNdx+charCodeNdx);for(var i=0;i<bufferTemplateArr.length;i++){if(bufferTemplateArr[i]!==" "){isMatch=!1;break}}}
return isMatch}
resetMaskSet();getMaskSet().p=seekNext(-1);if(!strict){if(opts.autoUnmask!==!0){var staticInput=getBufferTemplate().slice(0,seekNext(-1)).join(""),matches=inputValue.join("").match(new RegExp("^"+Inputmask.escapeRegex(staticInput),"g"));if(matches&&matches.length>0){inputValue.splice(0,matches.length*staticInput.length);initialNdx=seekNext(initialNdx)}}else{initialNdx=seekNext(initialNdx)}}
$.each(inputValue,function(ndx,charCode){var keypress=$.Event("keypress");keypress.which=charCode.charCodeAt(0);charCodes+=charCode;var lvp=getLastValidPosition(undefined,!0),lvTest=getMaskSet().validPositions[lvp],nextTest=getTestTemplate(lvp+1,lvTest?lvTest.locator.slice():undefined,lvp);if(!isTemplateMatch()||strict||opts.autoUnmask){var pos=strict?ndx:(nextTest.match.fn==null&&nextTest.match.optionality&&(lvp+1)<getMaskSet().p?lvp+1:getMaskSet().p);keypressEvent.call(input,keypress,!0,!1,strict,pos);initialNdx=pos+1;charCodes=""}else{keypressEvent.call(input,keypress,!0,!1,!0,lvp+1)}});if(writeOut){writeBuffer(input,getBuffer(),document.activeElement===input?seekNext(getLastValidPosition(0)):undefined,$.Event("checkval"))}}
function unmaskedvalue(input){if(input&&input.inputmask===undefined){return input.value}
var umValue=[],vps=getMaskSet().validPositions;for(var pndx in vps){if(vps[pndx].match&&vps[pndx].match.fn!=null){umValue.push(vps[pndx].input)}}
var unmaskedValue=umValue.length===0?null:(isRTL?umValue.reverse():umValue).join("");if(unmaskedValue!==null){var bufferValue=(isRTL?getBuffer().slice().reverse():getBuffer()).join("");if($.isFunction(opts.onUnMask)){unmaskedValue=(opts.onUnMask(bufferValue,unmaskedValue,opts)||unmaskedValue)}}
return unmaskedValue}
function caret(input,begin,end){function translatePosition(pos){if(isRTL&&typeof pos==="number"&&(!opts.greedy||opts.placeholder!=="")){var bffrLght=getBuffer().join("").length;pos=bffrLght-pos}
return pos}
var range;if(typeof begin==="number"){begin=translatePosition(begin);end=translatePosition(end);end=(typeof end=="number")?end:begin;var scrollCalc=parseInt(((input.ownerDocument.defaultView||window).getComputedStyle?(input.ownerDocument.defaultView||window).getComputedStyle(input,null):input.currentStyle).fontSize)*end;input.scrollLeft=scrollCalc>input.scrollWidth?scrollCalc:0;if(!androidchrome&&opts.insertMode===!1&&begin===end)end++;if(input.setSelectionRange){input.selectionStart=begin;input.selectionEnd=end}else if(window.getSelection){range=document.createRange();if(input.firstChild===undefined){var textNode=document.createTextNode("");input.appendChild(textNode)}
range.setStart(input.firstChild,begin<input.inputmask._valueGet().length?begin:input.inputmask._valueGet().length);range.setEnd(input.firstChild,end<input.inputmask._valueGet().length?end:input.inputmask._valueGet().length);range.collapse(!0);var sel=window.getSelection();sel.removeAllRanges();sel.addRange(range)}else if(input.createTextRange){range=input.createTextRange();range.collapse(!0);range.moveEnd("character",end);range.moveStart("character",begin);range.select()}}else{if(input.setSelectionRange){begin=input.selectionStart;end=input.selectionEnd}else if(window.getSelection){range=window.getSelection().getRangeAt(0);if(range.commonAncestorContainer.parentNode===input||range.commonAncestorContainer===input){begin=range.startOffset;end=range.endOffset}}else if(document.selection&&document.selection.createRange){range=document.selection.createRange();begin=0-range.duplicate().moveStart("character",-100000);end=begin+range.text.length}
return{"begin":translatePosition(begin),"end":translatePosition(end)}}}
function determineLastRequiredPosition(returnDefinition){var buffer=getBuffer(),bl=buffer.length,pos,lvp=getLastValidPosition(),positions={},lvTest=getMaskSet().validPositions[lvp],ndxIntlzr=lvTest!==undefined?lvTest.locator.slice():undefined,testPos;for(pos=lvp+1;pos<buffer.length;pos++){testPos=getTestTemplate(pos,ndxIntlzr,pos-1);ndxIntlzr=testPos.locator.slice();positions[pos]=$.extend(!0,{},testPos)}
var lvTestAlt=lvTest&&lvTest.alternation!==undefined?lvTest.locator[lvTest.alternation]:undefined;for(pos=bl-1;pos>lvp;pos--){testPos=positions[pos];if((testPos.match.optionality||testPos.match.optionalQuantifier||(lvTestAlt&&((lvTestAlt!==positions[pos].locator[lvTest.alternation]&&testPos.match.fn!=null)||(testPos.match.fn===null&&testPos.locator[lvTest.alternation]&&checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(","),lvTestAlt.toString().split(","))&&getTests(pos)[0].def!==""))))&&buffer[pos]===getPlaceholder(pos,testPos.match)){bl--}else break}
return returnDefinition?{"l":bl,"def":positions[bl]?positions[bl].match:undefined}:bl}
function clearOptionalTail(buffer){var rl=determineLastRequiredPosition(),lmib=buffer.length-1;for(;lmib>rl;lmib--){if(isMask(lmib))break}
buffer.splice(rl,lmib+1-rl);return buffer}
function isComplete(buffer){if($.isFunction(opts.isComplete))return opts.isComplete(buffer,opts);if(opts.repeat==="*")return undefined;var complete=!1,lrp=determineLastRequiredPosition(!0),aml=seekPrevious(lrp.l);if(lrp.def===undefined||lrp.def.newBlockMarker||lrp.def.optionality||lrp.def.optionalQuantifier){complete=!0;for(var i=0;i<=aml;i++){var test=getTestTemplate(i).match;if((test.fn!==null&&getMaskSet().validPositions[i]===undefined&&test.optionality!==!0&&test.optionalQuantifier!==!0)||(test.fn===null&&buffer[i]!==getPlaceholder(i,test))){complete=!1;break}}}
return complete}
function isSelection(begin,end){return isRTL?(begin-end)>1||((begin-end)===1&&opts.insertMode):(end-begin)>1||((end-begin)===1&&opts.insertMode)}
function wrapEventRuler(eventHandler){return function(e){var inComposition=!1,keydownPressed=!1;if(this.inputmask===undefined){var imOpts=$.data(this,"_inputmask_opts");if(imOpts)(new Inputmask(imOpts)).mask(this);else $(this).off(".inputmask")}else if(e.type!=="setvalue"&&(this.disabled||(this.readOnly&&!(e.type==="keydown"&&(e.ctrlKey&&e.keyCode===67)||(opts.tabThrough===!1&&e.keyCode===Inputmask.keyCode.TAB))))){e.preventDefault()}else{switch(e.type){case "input":if(skipInputEvent===!0||inComposition===!0){skipInputEvent=!1;return e.preventDefault()}
keydownPressed=!1;break;case "keydown":skipKeyPressEvent=!1;inComposition=!1;keydownPressed=!0;break;case "keypress":if(skipKeyPressEvent===!0){return e.preventDefault()}
skipKeyPressEvent=!0;break;case "compositionstart":inComposition=!0;break;case "compositionupdate":skipInputEvent=keydownPressed;break;case "compositionend":inComposition=!1;keydownPressed=!1;break;case "cut":skipInputEvent=!0;break}
return eventHandler.apply(this,arguments)}}}
function patchValueProperty(npt){var valueGet;var valueSet;function patchValhook(type){if($.valHooks&&($.valHooks[type]===undefined||$.valHooks[type].inputmaskpatch!==!0)){var valhookGet=$.valHooks[type]&&$.valHooks[type].get?$.valHooks[type].get:function(elem){return elem.value};var valhookSet=$.valHooks[type]&&$.valHooks[type].set?$.valHooks[type].set:function(elem,value){elem.value=value;return elem};$.valHooks[type]={get:function(elem){if(elem.inputmask){if(elem.inputmask.opts.autoUnmask){return elem.inputmask.unmaskedvalue()}else{var result=valhookGet(elem),maskset=elem.inputmask.maskset,bufferTemplate=maskset._buffer;bufferTemplate=bufferTemplate?bufferTemplate.join(""):"";return result!==bufferTemplate?result:""}}else return valhookGet(elem)},set:function(elem,value){var $elem=$(elem),result;result=valhookSet(elem,value);if(elem.inputmask){$elem.trigger("setvalue.inputmask")}
return result},inputmaskpatch:!0}}}
function getter(){if(this.inputmask){return this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():(valueGet.call(this)!==getBufferTemplate().join("")?(document.activeElement===this&&opts.clearMaskOnLostFocus?(isRTL?clearOptionalTail(getBuffer().slice()).reverse():clearOptionalTail(getBuffer().slice())).join(""):valueGet.call(this)):"")}else return valueGet.call(this)}
function setter(value){valueSet.call(this,value);if(this.inputmask){$(this).trigger("setvalue.inputmask")}}
function installNativeValueSetFallback(npt){$(npt).on("mouseenter.inputmask",wrapEventRuler(function(event){var $input=$(this),input=this,value=input.inputmask._valueGet();if(value!==""&&value!==getBuffer().join("")){$input.trigger("setvalue.inputmask")}}))}
if(!npt.inputmask.__valueGet){if(Object.getOwnPropertyDescriptor&&npt.value===undefined){valueGet=function(){return this.textContent};valueSet=function(value){this.textContent=value};Object.defineProperty(npt,"value",{get:getter,set:setter})}else if(document.__lookupGetter__&&npt.__lookupGetter__("value")){valueGet=npt.__lookupGetter__("value");valueSet=npt.__lookupSetter__("value");npt.__defineGetter__("value",getter);npt.__defineSetter__("value",setter)}else{valueGet=function(){return npt.value};valueSet=function(value){npt.value=value};patchValhook(npt.type);installNativeValueSetFallback(npt)}
npt.inputmask.__valueGet=valueGet;npt.inputmask._valueGet=function(overruleRTL){return isRTL&&overruleRTL!==!0?valueGet.call(this.el).split("").reverse().join(""):valueGet.call(this.el)};npt.inputmask.__valueSet=valueSet;npt.inputmask._valueSet=function(value,overruleRTL){valueSet.call(this.el,(value===null||value===undefined)?"":((overruleRTL!==!0&&isRTL)?value.split("").reverse().join(""):value))}}}
function handleRemove(input,k,pos,strict){function generalize(){if(opts.keepStatic){resetMaskSet(!0);var validInputs=[],lastAlt,positionsClone=$.extend(!0,{},getMaskSet().validPositions);for(lastAlt=getLastValidPosition();lastAlt>=0;lastAlt--){var validPos=getMaskSet().validPositions[lastAlt];if(validPos){if(validPos.match.fn!=null){validInputs.push(validPos.input)}
delete getMaskSet().validPositions[lastAlt];if(validPos.alternation!==undefined&&validPos.locator[validPos.alternation]===getTestTemplate(lastAlt).locator[validPos.alternation]){break}}}
if(lastAlt>-1){while(validInputs.length>0){getMaskSet().p=seekNext(getLastValidPosition());var keypress=$.Event("keypress");keypress.which=validInputs.pop().charCodeAt(0);keypressEvent.call(input,keypress,!0,!1,!1,getMaskSet().p)}}else getMaskSet().validPositions=$.extend(!0,{},positionsClone)}}
if(opts.numericInput||isRTL){if(k===Inputmask.keyCode.BACKSPACE){k=Inputmask.keyCode.DELETE}else if(k===Inputmask.keyCode.DELETE){k=Inputmask.keyCode.BACKSPACE}
if(isRTL){var pend=pos.end;pos.end=pos.begin;pos.begin=pend}}
if(k===Inputmask.keyCode.BACKSPACE&&(pos.end-pos.begin<1||opts.insertMode===!1)){pos.begin=seekPrevious(pos.begin);if(getMaskSet().validPositions[pos.begin]!==undefined&&(getMaskSet().validPositions[pos.begin].input===opts.groupSeparator||getMaskSet().validPositions[pos.begin].input===opts.radixPoint)){pos.begin--}}else if(k===Inputmask.keyCode.DELETE&&pos.begin===pos.end){pos.end=isMask(pos.end)?pos.end+1:seekNext(pos.end)+1;if(getMaskSet().validPositions[pos.begin]!==undefined&&(getMaskSet().validPositions[pos.begin].input===opts.groupSeparator||getMaskSet().validPositions[pos.begin].input===opts.radixPoint)){pos.end++}}
stripValidPositions(pos.begin,pos.end,!1,strict);if(strict!==!0){generalize()}
var lvp=getLastValidPosition(pos.begin);if(lvp<pos.begin){if(lvp===-1)resetMaskSet();getMaskSet().p=seekNext(lvp)}else if(strict!==!0){getMaskSet().p=pos.begin}}
function keydownEvent(e){var input=this,$input=$(input),k=e.keyCode,pos=caret(input);if(k===Inputmask.keyCode.BACKSPACE||k===Inputmask.keyCode.DELETE||(iphone&&k===127)||(e.ctrlKey&&k===88&&!isInputEventSupported("cut"))){e.preventDefault();if(k===88)undoValue=getBuffer().join("");handleRemove(input,k,pos);writeBuffer(input,getBuffer(),getMaskSet().p,e,undoValue!==getBuffer().join(""));if(input.inputmask._valueGet()===getBufferTemplate().join("")){$input.trigger("cleared")}else if(isComplete(getBuffer())===!0){$input.trigger("complete")}
if(opts.showTooltip){input.title=opts.tooltip||getMaskSet().mask}}else if(k===Inputmask.keyCode.END||k===Inputmask.keyCode.PAGE_DOWN){setTimeout(function(){var caretPos=seekNext(getLastValidPosition());if(!opts.insertMode&&caretPos===getMaskLength()&&!e.shiftKey)caretPos--;caret(input,e.shiftKey?pos.begin:caretPos,caretPos)},0)}else if((k===Inputmask.keyCode.HOME&&!e.shiftKey)||k===Inputmask.keyCode.PAGE_UP){caret(input,0,e.shiftKey?pos.begin:0)}else if(((opts.undoOnEscape&&k===Inputmask.keyCode.ESCAPE)||(k===90&&e.ctrlKey))&&e.altKey!==!0){checkVal(input,!0,!1,undoValue.split(""));$input.trigger("click")}else if(k===Inputmask.keyCode.INSERT&&!(e.shiftKey||e.ctrlKey)){opts.insertMode=!opts.insertMode;caret(input,!opts.insertMode&&pos.begin===getMaskLength()?pos.begin-1:pos.begin)}else if(opts.tabThrough===!0&&k===Inputmask.keyCode.TAB){if(e.shiftKey===!0){if(getTest(pos.begin).fn===null){pos.begin=seekNext(pos.begin)}
pos.end=seekPrevious(pos.begin,!0);pos.begin=seekPrevious(pos.end,!0)}else{pos.begin=seekNext(pos.begin,!0);pos.end=seekNext(pos.begin,!0);if(pos.end<getMaskLength())pos.end--}
if(pos.begin<getMaskLength()){e.preventDefault();caret(input,pos.begin,pos.end)}}else if(opts.insertMode===!1&&!e.shiftKey){if(k===Inputmask.keyCode.RIGHT){setTimeout(function(){var caretPos=caret(input);caret(input,caretPos.begin)},0)}else if(k===Inputmask.keyCode.LEFT){setTimeout(function(){var caretPos=caret(input);caret(input,isRTL?caretPos.begin+1:caretPos.begin-1)},0)}}
opts.onKeyDown.call(this,e,getBuffer(),caret(input).begin,opts);ignorable=$.inArray(k,opts.ignorables)!==-1}
function keypressEvent(e,checkval,writeOut,strict,ndx){var input=this,$input=$(input),k=e.which||e.charCode||e.keyCode;if(checkval!==!0&&(!(e.ctrlKey&&e.altKey)&&(e.ctrlKey||e.metaKey||ignorable))){if(k===Inputmask.keyCode.ENTER&&undoValue!==getBuffer().join("")){undoValue=getBuffer().join("");e.preventDefault();setTimeout(function(){$input.trigger("change")},0)}
return!0}else{if(k){if(k===46&&e.shiftKey===!1&&opts.radixPoint===",")k=44;var pos=checkval?{begin:ndx,end:ndx}:caret(input),forwardPosition,c=String.fromCharCode(k);var isSlctn=isSelection(pos.begin,pos.end);if(isSlctn){getMaskSet().undoPositions=$.extend(!0,{},getMaskSet().validPositions);handleRemove(input,Inputmask.keyCode.DELETE,pos,!0);pos.begin=getMaskSet().p;if(!opts.insertMode){opts.insertMode=!opts.insertMode;setValidPosition(pos.begin,strict);opts.insertMode=!opts.insertMode}
isSlctn=!opts.multi}
getMaskSet().writeOutBuffer=!0;var p=isRTL&&!isSlctn?pos.end:pos.begin;var valResult=isValid(p,c,strict);if(valResult!==!1){if(valResult!==!0){p=valResult.pos!==undefined?valResult.pos:p;c=valResult.c!==undefined?valResult.c:c}
resetMaskSet(!0);if(valResult.caret!==undefined){forwardPosition=valResult.caret}else{var vps=getMaskSet().validPositions;if(!opts.keepStatic&&(vps[p+1]!==undefined&&getTests(p+1,vps[p].locator.slice(),p).length>1||vps[p].alternation!==undefined)){forwardPosition=p+1}else forwardPosition=seekNext(p)}
getMaskSet().p=forwardPosition}
if(writeOut!==!1){var self=this;setTimeout(function(){opts.onKeyValidation.call(self,k,valResult,opts)},0);if(getMaskSet().writeOutBuffer&&valResult!==!1){var buffer=getBuffer();writeBuffer(input,buffer,checkval?undefined:opts.numericInput?seekPrevious(forwardPosition):forwardPosition,e,checkval!==!0);if(checkval!==!0){setTimeout(function(){if(isComplete(buffer)===!0)$input.trigger("complete")},0)}}else if(isSlctn){getMaskSet().buffer=undefined;getMaskSet().validPositions=getMaskSet().undoPositions}}else if(isSlctn){getMaskSet().buffer=undefined;getMaskSet().validPositions=getMaskSet().undoPositions}
if(opts.showTooltip){input.title=opts.tooltip||getMaskSet().mask}
if(checkval&&$.isFunction(opts.onBeforeWrite)){var result=opts.onBeforeWrite(e,getBuffer(),forwardPosition,opts);if(result&&result.refreshFromBuffer){var refresh=result.refreshFromBuffer;refreshFromBuffer(refresh===!0?refresh:refresh.start,refresh.end,result.buffer);resetMaskSet(!0);if(result.caret){getMaskSet().p=result.caret}}}
e.preventDefault();if(checkval){return valResult}}}}
function pasteEvent(e){var input=this,ev=e.originalEvent||e,$input=$(input),inputValue=input.inputmask._valueGet(!0),caretPos=caret(input);if(e.type==="propertychange"&&input.inputmask._valueGet().length<=getMaskLength()){return!0}else if(e.type==="paste"){var valueBeforeCaret=inputValue.substr(0,caretPos.begin),valueAfterCaret=inputValue.substr(caretPos.end,inputValue.length);if(valueBeforeCaret===getBufferTemplate().slice(0,caretPos.begin).join(""))valueBeforeCaret="";if(valueAfterCaret===getBufferTemplate().slice(caretPos.end).join(""))valueAfterCaret="";if(window.clipboardData&&window.clipboardData.getData){inputValue=valueBeforeCaret+window.clipboardData.getData("Text")+valueAfterCaret}else if(ev.clipboardData&&ev.clipboardData.getData){inputValue=valueBeforeCaret+ev.clipboardData.getData("text/plain")+valueAfterCaret}}
var pasteValue=inputValue;if($.isFunction(opts.onBeforePaste)){pasteValue=opts.onBeforePaste(inputValue,opts);if(pasteValue===!1){e.preventDefault();return!1}
if(!pasteValue){pasteValue=inputValue}}
checkVal(input,!1,!1,isRTL?pasteValue.split("").reverse():pasteValue.toString().split(""));writeBuffer(input,getBuffer(),undefined,e,!0);$input.trigger("click");if(isComplete(getBuffer())===!0){$input.trigger("complete")}
return!1}
function inputFallBackEvent(e){var input=this;checkVal(input,!0,!1,input.inputmask._valueGet().split(""));if(isComplete(getBuffer())===!0){$(input).trigger("complete")}
e.preventDefault()}
function mobileInputEvent(e){var input=this;var caretPos=caret(input),currentValue=input.inputmask._valueGet();currentValue=currentValue.replace(new RegExp("("+Inputmask.escapeRegex(getBufferTemplate().join(""))+")*"),"");if(caretPos.begin>currentValue.length){caret(input,currentValue.length);caretPos=caret(input)}
if((getBuffer().length-currentValue.length)===1&&currentValue.charAt(caretPos.begin)!==getBuffer()[caretPos.begin]&&currentValue.charAt(caretPos.begin+1)!==getBuffer()[caretPos.begin]&&!isMask(caretPos.begin)){e.keyCode=opts.keyCode.BACKSPACE;keydownEvent.call(input,e)}else{inputFallBackEvent.call(this,e)}
e.preventDefault()}
function compositionStartEvent(e){var ev=e.originalEvent||e;undoValue=getBuffer().join("");if(compositionData===""||ev.data.indexOf(compositionData)!==0){}}
function compositionUpdateEvent(e){var input=this,ev=e.originalEvent||e;if(ev.data.indexOf(compositionData)===0){resetMaskSet();getMaskSet().p=seekNext(-1);skipInputEvent=!0}
var newData=ev.data;for(var i=0;i<newData.length;i++){var keypress=$.Event("keypress");keypress.which=newData.charCodeAt(i);skipKeyPressEvent=!1;ignorable=!1;keypressEvent.call(input,keypress,!0,!1,!1,getMaskSet().p)}
setTimeout(function(){var forwardPosition=getMaskSet().p;writeBuffer(input,getBuffer(),opts.numericInput?seekPrevious(forwardPosition):forwardPosition)},0);compositionData=ev.data}
function compositionEndEvent(e){}
function setValueEvent(e){var input=this,value=input.inputmask._valueGet();checkVal(input,!0,!1,($.isFunction(opts.onBeforeMask)?(opts.onBeforeMask(value,opts)||value):value).split(""));undoValue=getBuffer().join("");if((opts.clearMaskOnLostFocus||opts.clearIncomplete)&&input.inputmask._valueGet()===getBufferTemplate().join("")){input.inputmask._valueSet("")}}
function focusEvent(e){var input=this,nptValue=input.inputmask._valueGet();if(opts.showMaskOnFocus&&(!opts.showMaskOnHover||(opts.showMaskOnHover&&nptValue===""))){if(input.inputmask._valueGet()!==getBuffer().join("")){writeBuffer(input,getBuffer(),seekNext(getLastValidPosition()))}}else if(mouseEnter===!1){caret(input,seekNext(getLastValidPosition()))}
if(opts.positionCaretOnTab===!0){setTimeout(function(){caret(input,seekNext(getLastValidPosition()))},0)}
undoValue=getBuffer().join("")}
function mouseleaveEvent(e){var input=this;mouseEnter=!1;if(opts.clearMaskOnLostFocus){var buffer=getBuffer().slice(),nptValue=input.inputmask._valueGet();if(document.activeElement!==input&&nptValue!==input.getAttribute("placeholder")&&nptValue!==""){if(getLastValidPosition()===-1&&nptValue===getBufferTemplate().join("")){buffer=[]}else{clearOptionalTail(buffer)}
writeBuffer(input,buffer)}}}
function clickEvent(e){function doRadixFocus(clickPos){if(opts.radixFocus&&opts.radixPoint!==""){var vps=getMaskSet().validPositions;if(vps[clickPos]===undefined||(vps[clickPos].input===getPlaceholder(clickPos))){if(clickPos<seekNext(-1))return!0;var radixPos=$.inArray(opts.radixPoint,getBuffer());if(radixPos!==-1){for(var vp in vps){if(radixPos<vp&&vps[vp].input!==getPlaceholder(vp)){return!1}}
return!0}}}
return!1}
var input=this;if(document.activeElement===input){var selectedCaret=caret(input);if(selectedCaret.begin===selectedCaret.end){if(doRadixFocus(selectedCaret.begin)){caret(input,$.inArray(opts.radixPoint,getBuffer()))}else{var clickPosition=selectedCaret.begin,lvclickPosition=getLastValidPosition(clickPosition),lastPosition=seekNext(lvclickPosition);if(clickPosition<lastPosition){caret(input,!isMask(clickPosition)&&!isMask(clickPosition-1)?seekNext(clickPosition):clickPosition)}else{if(getBuffer()[lastPosition]!==getPlaceholder(lastPosition)||(!isMask(lastPosition,!0)&&getTest(lastPosition).def===getPlaceholder(lastPosition))){lastPosition=seekNext(lastPosition)}
caret(input,lastPosition)}}}}}
function dblclickEvent(e){var input=this;setTimeout(function(){caret(input,0,seekNext(getLastValidPosition()))},0)}
function cutEvent(e){var input=this,$input=$(input),pos=caret(input),ev=e.originalEvent||e;var clipboardData=window.clipboardData||ev.clipboardData,clipData=isRTL?getBuffer().slice(pos.end,pos.begin):getBuffer().slice(pos.begin,pos.end);clipboardData.setData("text",isRTL?clipData.reverse().join(""):clipData.join(""));if(document.execCommand)document.execCommand("copy");handleRemove(input,Inputmask.keyCode.DELETE,pos);writeBuffer(input,getBuffer(),getMaskSet().p,e,undoValue!==getBuffer().join(""));if(input.inputmask._valueGet()===getBufferTemplate().join("")){$input.trigger("cleared")}
if(opts.showTooltip){input.title=opts.tooltip||getMaskSet().mask}}
function blurEvent(e){var $input=$(this),input=this;if(input.inputmask){var nptValue=input.inputmask._valueGet(),buffer=getBuffer().slice();if(undoValue!==buffer.join("")){setTimeout(function(){$input.trigger("change");undoValue=buffer.join("")},0)}
if(nptValue!==""){if(opts.clearMaskOnLostFocus){if(getLastValidPosition()===-1&&nptValue===getBufferTemplate().join("")){buffer=[]}else{clearOptionalTail(buffer)}}
if(isComplete(buffer)===!1){setTimeout(function(){$input.trigger("incomplete")},0);if(opts.clearIncomplete){resetMaskSet();if(opts.clearMaskOnLostFocus){buffer=[]}else{buffer=getBufferTemplate().slice()}}}
writeBuffer(input,buffer,undefined,e)}}}
function mouseenterEvent(e){var input=this;mouseEnter=!0;if(document.activeElement!==input&&opts.showMaskOnHover){if(input.inputmask._valueGet()!==getBuffer().join("")){writeBuffer(input,getBuffer())}}}
function submitEvent(e){if(undoValue!==getBuffer().join("")){$el.trigger("change")}
if(opts.clearMaskOnLostFocus&&getLastValidPosition()===-1&&el.inputmask._valueGet&&el.inputmask._valueGet()===getBufferTemplate().join("")){el.inputmask._valueSet("")}
if(opts.removeMaskOnSubmit){el.inputmask._valueSet(el.inputmask.unmaskedvalue(),!0);setTimeout(function(){writeBuffer(el,getBuffer())},0)}}
function resetEvent(e){setTimeout(function(){$el.trigger("setvalue.inputmask")},0)}
function mask(elem){el=elem;$el=$(el);if(opts.showTooltip){el.title=opts.tooltip||getMaskSet().mask}
if(el.dir==="rtl"||opts.rightAlign){el.style.textAlign="right"}
if(el.dir==="rtl"||opts.numericInput){el.dir="ltr";el.removeAttribute("dir");el.inputmask.isRTL=!0;isRTL=!0}
$el.off(".inputmask");patchValueProperty(el);if((el.tagName==="INPUT"&&isInputTypeSupported(el.getAttribute("type")))||el.isContentEditable||el.tagName==="TEXTAREA"){$(el.form).on("submit.inputmask",submitEvent).on("reset.inputmask",resetEvent);$el.on("mouseenter.inputmask",wrapEventRuler(mouseenterEvent)).on("blur.inputmask",wrapEventRuler(blurEvent)).on("focus.inputmask",wrapEventRuler(focusEvent)).on("mouseleave.inputmask",wrapEventRuler(mouseleaveEvent)).on("click.inputmask",wrapEventRuler(clickEvent)).on("dblclick.inputmask",wrapEventRuler(dblclickEvent)).on(PasteEventType+".inputmask dragdrop.inputmask drop.inputmask",wrapEventRuler(pasteEvent)).on("cut.inputmask",wrapEventRuler(cutEvent)).on("complete.inputmask",wrapEventRuler(opts.oncomplete)).on("incomplete.inputmask",wrapEventRuler(opts.onincomplete)).on("cleared.inputmask",wrapEventRuler(opts.oncleared)).on("keydown.inputmask",wrapEventRuler(keydownEvent)).on("keypress.inputmask",wrapEventRuler(keypressEvent));if(!androidfirefox){$el.on("compositionstart.inputmask",wrapEventRuler(compositionStartEvent)).on("compositionupdate.inputmask",wrapEventRuler(compositionUpdateEvent)).on("compositionend.inputmask",wrapEventRuler(compositionEndEvent))}
if(PasteEventType==="paste"){$el.on("input.inputmask",wrapEventRuler(inputFallBackEvent))}
if(android||androidfirefox||androidchrome||kindle){$el.off("input.inputmask");$el.on("input.inputmask",wrapEventRuler(mobileInputEvent))}}
$el.on("setvalue.inputmask",wrapEventRuler(setValueEvent));if(el.inputmask._valueGet()!==""||opts.clearMaskOnLostFocus===!1){var initialValue=$.isFunction(opts.onBeforeMask)?(opts.onBeforeMask(el.inputmask._valueGet(),opts)||el.inputmask._valueGet()):el.inputmask._valueGet();checkVal(el,!0,!1,initialValue.split(""));var buffer=getBuffer().slice();undoValue=buffer.join("");if(isComplete(buffer)===!1){if(opts.clearIncomplete){resetMaskSet()}}
if(opts.clearMaskOnLostFocus){if(buffer.join("")===getBufferTemplate().join("")){buffer=[]}else{clearOptionalTail(buffer)}}
writeBuffer(el,buffer);if(document.activeElement===el){caret(el,seekNext(getLastValidPosition()))}}}
var valueBuffer;if(actionObj!==undefined){switch(actionObj.action){case "isComplete":el=actionObj.el;return isComplete(getBuffer());case "unmaskedvalue":el=actionObj.el;if(el!==undefined&&el.inputmask!==undefined){maskset=el.inputmask.maskset;opts=el.inputmask.opts;isRTL=el.inputmask.isRTL}else{valueBuffer=actionObj.value;if(opts.numericInput){isRTL=!0}
valueBuffer=($.isFunction(opts.onBeforeMask)?(opts.onBeforeMask(valueBuffer,opts)||valueBuffer):valueBuffer).split("");checkVal(undefined,!1,!1,isRTL?valueBuffer.reverse():valueBuffer);if($.isFunction(opts.onBeforeWrite))opts.onBeforeWrite(undefined,getBuffer(),0,opts)}
return unmaskedvalue(el);case "mask":el=actionObj.el;maskset=el.inputmask.maskset;opts=el.inputmask.opts;isRTL=el.inputmask.isRTL;undoValue=getBuffer().join("");mask(el);break;case "format":if(opts.numericInput){isRTL=!0}
valueBuffer=($.isFunction(opts.onBeforeMask)?(opts.onBeforeMask(actionObj.value,opts)||actionObj.value):actionObj.value).split("");checkVal(undefined,!1,!1,isRTL?valueBuffer.reverse():valueBuffer);if($.isFunction(opts.onBeforeWrite))opts.onBeforeWrite(undefined,getBuffer(),0,opts);if(actionObj.metadata){return{value:isRTL?getBuffer().slice().reverse().join(""):getBuffer().join(""),metadata:maskScope({"action":"getmetadata"},maskset,opts)}}
return isRTL?getBuffer().slice().reverse().join(""):getBuffer().join("");case "isValid":if(opts.numericInput){isRTL=!0}
if(actionObj.value){valueBuffer=actionObj.value.split("");checkVal(undefined,!1,!0,isRTL?valueBuffer.reverse():valueBuffer)}else{actionObj.value=getBuffer().join("")}
var buffer=getBuffer();var rl=determineLastRequiredPosition(),lmib=buffer.length-1;for(;lmib>rl;lmib--){if(isMask(lmib))break}
buffer.splice(rl,lmib+1-rl);return isComplete(buffer)&&actionObj.value===getBuffer().join("");case "getemptymask":return getBufferTemplate();case "remove":el=actionObj.el;$el=$(el);maskset=el.inputmask.maskset;opts=el.inputmask.opts;el.inputmask._valueSet(unmaskedvalue(el));$el.off(".inputmask");var valueProperty;if(Object.getOwnPropertyDescriptor){valueProperty=Object.getOwnPropertyDescriptor(el,"value")}
if(valueProperty&&valueProperty.get){if(el.inputmask.__valueGet){Object.defineProperty(el,"value",{get:el.inputmask.__valueGet,set:el.inputmask.__valueSet})}}else if(document.__lookupGetter__&&el.__lookupGetter__("value")){if(el.inputmask.__valueGet){el.__defineGetter__("value",el.inputmask.__valueGet);el.__defineSetter__("value",el.inputmask.__valueSet)}}
el.inputmask=undefined;break;case "getmetadata":if($.isArray(maskset.metadata)){var alternation,lvp=getLastValidPosition();for(var firstAlt=lvp;firstAlt>=0;firstAlt--){if(getMaskSet().validPositions[firstAlt]&&getMaskSet().validPositions[firstAlt].alternation!==undefined){alternation=getMaskSet().validPositions[firstAlt].alternation;break}}
if(alternation!==undefined){return maskset.metadata[getMaskSet().validPositions[lvp].locator[alternation]]}else return maskset.metadata[0]}
return maskset.metadata}}}
window.Inputmask=Inputmask;return Inputmask}))