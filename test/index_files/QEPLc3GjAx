window.__jivoOnError=function(e){if(navigator.userAgent.search(/google/gi)===-1&&navigator.userAgent.search(/YandexMobileBot/gi)===-1)try{var t=window.location.protocol+"//err.jivosite.com/widget",o="POST",n={widget:"true",widget_version:window.jivo_version,level:2,url:window.location.href,user_agent:navigator.userAgent,lineNumber:e&&e.lineNumber,fileName:e&&e.fileName,column:e&&e.columnNumber,full_message:e&&e.stack,short_message:e&&e.message},r=new XMLHttpRequest;"withCredentials"in r?r.open(o,t,!0):"undefined"!=typeof XDomainRequest&&(r=new XDomainRequest,r.open(o,t)),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(n))}catch(e){}},function(){function e(e,t,o,n){function r(o){if(!i()){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var o=t.getElementsByTagName("script"),r=o[0],i=t.createElement("script");c(i),r.parentNode.insertBefore(i,r).innerHTML=l(n)}else if(0!==n.status){var a=new Error("Config not loaded. Responce status code "+n.status);e.__jivoOnError(a)}},n.open("GET",o+"?rnd="+Math.random(),!0),n.send(null)}}function i(){var e=!1;if(U.hasStorage){var t=localStorage.getItem("jv_deleted_"+R+"_resolve_time");t&&parseInt(t)>=(new Date).getTime()&&(e=!0,a())}return e}function a(){var e="This widget is permanently removed";console.error?console.error(e):console.log?console.log(e):void 0}function s(){U.hasStorage&&localStorage.setItem("jv_deleted_"+R+"_resolve_time",((new Date).getTime()+oe).toString()),a()}function c(e){return e.type="text/javascript",e.async=!0,e.charset="UTF-8",e}function l(e){var t;return t=e.responseType&&"text"!==e.responseType?"document"===e.responseType?e.responseXML:e.response:e.responseText}function d(t){if("[object Object]"===Object.prototype.toString.call(e.wix_context)&&"[object Object]"===Object.prototype.toString.call(e.jivo_wix)&&Object.assign(t,e.jivo_wix),e.jivo_config=J=t,u())throw new Error("Placing widget is forbidden on "+e.top.location.host);if(z&&J.disable_mobile)return void(console.log&&console.log("Jivo: disable mobile widget"));v(),_(),O()}function u(){return void 0!==J.host_blacklist&&J.host_blacklist.indexOf(e.location.host)>=0}function v(){if("string"==typeof J.geoip&&""!==J.geoip){var e=J.geoip.split(";")[0];null!==g(e)&&(ce=e)}m()||f({availableHost:null,buildNumber:null});var t=J.static_host?J.static_host.split("/"):[];se=t[1]?"/"+t[1]:"";var o=p();re=o.retriesCount?o.retriesCount:re,re>4&&(re=4),K=g(ce)}function g(e){var t=Object.keys(ae),o=null;return t.forEach(function(t){if(!o){var n=ae[t];n.indexOf(e)!==-1&&(o=t)}}),o}function m(){var e=p();return e.buildNumber===J.build_number&&e.availableHost}function f(e){for(var t=p(),o=Object.keys(e),n=0;n<o.length;n++)t[o[n]]=e[o[n]];U.hasStorage&&localStorage.setItem("jv_store_available_host",JSON.stringify(t))}function p(){var e,t={retriesCount:null,type:null,availableHost:null,buildNumber:null};return U.hasStorage&&(e=JSON.parse(localStorage.getItem("jv_store_available_host")),e&&(t.retriesCount=e.retriesCount,t.type=e.type,t.availableHost=e.availableHost,t.buildNumber=e.buildNumber)),t}function _(){Q.src="javascript:false",Q.title="",Q.role="presentation",Q.setAttribute("name","jivo_container"),Q.setAttribute("id","jivo_container"),Q.setAttribute("frameborder","no"),$.className+="jivo-no-transition","undefined"==typeof SVGRect&&($.className+=" no-svg"),(Q.frameElement||Q).style.cssText="width:100%;height:100%;border:0",e.jivo_init=function(){ee=0;var o=t.createEvent("Event");o.initEvent("jBeforeunload",!0,!0),e.dispatchEvent(o),b()},e.atob&&"complete"!==t.readyState?T(e,"load",b):b(),T(e,"message",function(o){if(!o)return void(console&&console.log&&console.log("Error receive postMessage, window message event is empty."));var n,r,i=o.data;if("in_node_webkit"==i.name&&(n||(n=o.source,r=o.origin),n&&r)){e.jivo_cobrowse={source:n,origin:r};var a="jv_"+encodeURIComponent("langpack")+"_"+J.widget_id+"="+encodeURIComponent(JSON.stringify(i.langpack));J.cookie_domain&&(a+="; domain="+J.cookie_domain),a+="; path=/",t.cookie=a,n.postMessage({name:"widget_ready"},r)}"iframe_url_changed"!=i.name&&"iframe_url_changed"!=i||A()},!1)}function b(){var e=h();m()||e===J.base_url?y(e):N(e)}function h(e){var t,o=e?"":se;return m()?t=p().availableHost:0===re?(K=g(ce),t=ie[K]+o):1===re?(K=w(ae,K),t=ie[K]+o):t=J.base_url,t}function w(e,t){var o=Object.keys(e),n=j(o);return n===t?w(e,t):n}function j(e){return e[Math.floor(Math.random()*e.length)]}function y(e){var o=t.getElementsByTagName("head")[0],n=t.createElement("script"),r=S(e);Z=Z||(new Date).getTime(),c(n),n.className="js-jivo-bundle",n.src=r,U.bundleSrc=r,n.onerror=function(){E("error",e)},o.appendChild(n)}function S(e){var t=J.bundle_folder?J.bundle_folder:"";return e+t+"/js/bundle_"+J.locale+".js?rand="+J.build_number}function E(t,o,n){if(clearTimeout(F),++re>=ne){var r="Bundle not loaded. Type: "+t,i=o?". Host: "+o:"",a=n?". Status code: "+n:"",s=new Error(r+i+a);return void e.__jivoOnError(s)}f({availableHost:null,retriesCount:re,type:t}),b()}function N(e){var t=new XMLHttpRequest,o=h(!0)+"/ping?rand="+(new Date).getTime();t.onreadystatechange=function(){4===t.readyState&&(204===t.status?(clearTimeout(F),f({retriesCount:re,availableHost:e,buildNumber:J.build_number}),y(e)):0!==t.status&&E("error",e,t.status))},t.open("GET",o,!0),t.send(null),C()}function C(){F=setTimeout(function(){E("timeout")},te)}function T(t,o,n){t.addEventListener?t.addEventListener(o,n,!1):t.attachEvent&&(t.attachEvent("on"+o,function(t){return function(){n.call(t,e.event)}}(t)),t=null)}function O(){J.cp_tracker_id&&J.cp_tracker_url&&(e._cp={trackerId:J.cp_tracker_id},L(J.cp_tracker_url))}function L(e,o){var n=o||t,r=n.getElementsByTagName("script"),i=r[0],a=n.createElement("script");c(a),i.parentNode.insertBefore(a,i).src=e}function B(e){clearTimeout(F),Y=e;var t=((new Date).getTime()-Z)/1e3;U.hasStorage&&t>6&&localStorage.setItem("jv_store_cdn_load_time",t),H()}function H(){W=t.body.lastChild,$.style&&($.style.opacity="0",$.style.visibility="hidden"),$.setAttribute("id","jivo-iframe-container"),$.appendChild(Q),W?W.parentNode.insertBefore($,W.nextSibling):t.body.appendChild($),A()}function A(){function o(t,o,n,r,i){Object.assign(i,{message:"Bundle init error",columnNumber:r,lineNumber:n,url:o}),e.parent.__jivoOnError(i)}if(!(ee++>3)){if(!Y)return ee--,b();try{q=Q.contentWindow.document}catch(e){X=t.domain,Q.src="javascript:var d=document.open();d.domain='"+X+"';void(0);",q=Q.contentWindow.document}var n="<!doctype HTML>",r='<meta name="google" content="notranslate"><meta http-equiv="X-UA-Compatible" content="IE=edge" />',i='<script type="text/javascript">window.onerror = '+o.toString()+";"+Y+"</script>",a="<head>"+r+i+"</head>",s='<body class="notranslate"><div id="widget"></div><div id="player"></div></body>';q.write(n+a+s),q.close()}}function k(e){e.globalStore=U,I()}function I(){Y=null;for(var e=t.getElementsByTagName("head")[0],o=e.getElementsByClassName("js-jivo-bundle"),n=0;n<o.length;n++)o[n].parentNode&&(o[n].parentNode.removeChild(o[n]),o[n]=null);o=null}if("undefined"==typeof e.jivo_magic_var){e.jivo_magic_var=!0;var R,M,U={hasStorage:e.__hasStorage,jivoLoaderVersion:o,loadScript:L,currentLoaderVersionCache:n},x=/UCBrowser/i.test(navigator.userAgent);try{throw new Error("Get script URL")}catch(e){var P,V;P=x&&t.currentScript&&t.currentScript.src?[t.currentScript.src]:e.stack.split("\n"),V=P.length;for(var D=0;D<V;D++)if(!R){var G=P[D].match(/https?:\/\/(\S+)\/script\/widget\/([A-Za-z0-9]+)/);G&&G.length>1&&(M=G[1],R=G[2])}}if(!R||!M)throw new Error("Failed to evaluate the widgetId or configHost");var J,X,q,W,F,Y,K,Z,z=/iPhone|iPad|iPod|Android|Windows Phone/i.test(navigator.userAgent),Q=t.createElement("iframe"),$=t.createElement("div"),ee=0,te=5e3,oe=6048e5,ne=5,re=0,ie=[["//cdn-fr.jivosite.com"],["//cdn-cis.jivosite.com"],["//cdn-ca.jivosite.com"]],ae={0:["default"],1:["RU","KZ","UA","BY"],2:["US","CA","AG","BS","BB","BZ","HT","GT","HN","GD","DM","DO","MX","NI","PA","SV","LC","VC","KN","TT","JM","CR","CU","AR","BR","BO","VE","GY","CO","PY","PE","SR","UY","CL","EC","AU","VU","KI","MH","FM","NR","NZ","PW","PG","WS","SB","TK","TV","FJ","PH"]},se="",ce="default";e.__jivoConfigOnLoad=d,e.__jivoBundleOnLoad=B,e.__jivoBundleInit=k,r("//"+M+"/script/widget/config/"+R),e.__jivoCacheDeletedWidget=s,U.getHostURL=h,U.getAvailableHostInfo=p,U.setAvailableHostInfo=f}}var t=.1;window.__hasStorage=!1;try{localStorage.setItem("testLocalStorage","ok"),localStorage.removeItem("testLocalStorage"),window.__hasStorage=!0}catch(e){}var o=e,n=null;if(window.__hasStorage){try{n=JSON.parse(localStorage.getItem("__jivoLoader"))}catch(e){window.__jivoOnError(Object.assign(e,{message:"Loader parse error"}))}n&&n.version>=t&&(o=new Function("window","document","broswerCacheLoaderVersion","currentLoaderVersionCache","("+n.code+")(window, document, broswerCacheLoaderVersion, currentLoaderVersionCache)"))}try{o(window,document,t,n?n.version:t)}catch(n){window.__jivoOnError(Object.assign(n,{message:"Loader error"})),delete window.jivo_magic_var,o=e,o(window,document,t,t)}}();